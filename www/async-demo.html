<!-- <script>

  'use strict';



  const outer = () => {

    let t = 2;

    const fn = () => {
      t = 4;
    };

    setTimeout(fn, 2000);

    return () => {
      console.log(t);
    };

  }

  const inner = outer();

  inner();

  setTimeout(() => {
    inner();
  }, 4000);

  // console.dir(inner);


</script> -->


<!-- <script>

  'use strict';

  // pyramid of doom
  setTimeout(() => {
      console.log('a');

      setTimeout(() => {
          console.log('b');

          setTimeout(() => {
              console.log('c');
          }, 500);

      }, 1000);
  
  }, 2000);



</script> -->

<!-- <script>

  'use strict';

  // run the all done function, after all three setTimeout have completed
  // - you may not change the delay values (assume they are random)
  // - you may not wrap the allDone in a setTimeout with value large the
  // other delays
  // - all three setTimeout function calls must invoked in the same task

  const allDone = () => {
    console.log('all done!');
  };

  let t = 0;

  t++;
  setTimeout(() => {
    console.log('a');
    t--;
    if (t === 0) {
      allDone();
    }
  }, 1000);

  t++;
  setTimeout(() => {
    console.log('b');
    t--;
    if (t === 0) {
      allDone();
    }
  }, 2000);

  t++;
  setTimeout(() => {
    console.log('c');
    t--;
    if (t === 0) {
      allDone();
    }
  }, 500);
  
</script> -->





<script>

  'use strict';


  /*
  class Promise {

    constructor(fn) {

      this.resolveFns = [];
      this.rejectFns = [];

      const resolveFn = (data) => {
        this.resolveFns.forEach(resolveFn => resolveFn(data));
      }

      const rejectFn = (data) => {
        this.rejectFns.forEach(rejectFn => rejectFn(data));
      }

      fn(resolveFn, rejectFn);
    }

    then(fn) {
      this.resolveFns.push(fn);
    }
    catch(fn) {
      this.rejectFns.push(fn);
    }
  }
  */

  /*
  const popTheQuestion = () => {
    return new Promise(function youngLady(resolve, reject) {
    
      console.log('young lady is diligently considering his request...');
      
      setTimeout(function sheDecides() {
        console.log('she says yes to the dress');
        resolve('the young man is love of her life!');
      }, 2000);
    
    })
  };

  const findSomeClothes = (result) => {
    console.log(result);
    console.log('yay! I am getting married!');
    console.log('we need to find some wedding clothes');
    return new Promise(resolve => {

      setTimeout(() => {
        resolve('found some wedding clothes');
      }, 2000);

    });
  };

  const findALocation = (result) => {
    console.log(result);
    console.log('find a place to declare our love...');
    return new Promise(resolve => {

      setTimeout(() => {
        resolve('found a place');
      }, 2000);

    });
  };


  popTheQuestion()
    .then((result) => findSomeClothes(result))
    .then((result) => findALocation(result))
    .then(result => console.log(result));

    */

/*
    console.log('young man poses the question');

  const youngMan = ;

  youngMan
    .then(function heIsHappy(result) {
      console.log(result);
      console.log('yay! I am getting married!');
      console.log('we need to find some wedding clothes');
      return new Promise(resolve => {

        setTimeout(() => {
          resolve('found some wedding clothes');
        }, 2000);

      });

    })
    .then(result => {

      console.log(result);
      console.log('find a place to declare our love...');
      return new Promise(resolve => {

        setTimeout(() => {
          resolve('found a place');
        }, 2000);

      });

    })
    .then(result => {

      console.log(result);
    })
    .catch(function heIsNotHappy(result) {
      console.log(result);
      console.log('time to find a new friend...');
    });

  console.log('young man is waiting...');

  /*

  const myFetch = (url) => {

    return new Promise(resolve => {

      const xhr = new XMLHttpRequest();

      xhr.addEventListener('readystatechange', () => {
    
        if (xhr.readyState === 4 && xhr.status === 200) {
          resolve(JSON.parse(xhr.responseText));
        }
    
      });
    
      xhr.open('GET', url);
      xhr.send();

    });

  };

  // create a new function named 'myFetch', the new function should work according to the example below
  // use the XHR example above to make the REST API call

  myFetch('http://localhost:3060/colors').then(colors => console.log(colors));

  */


</script>

<script>

  'use strict';

  /*
  const p = new Promise(resolve => {
    setTimeout(() => {
      resolve('a');
    }, 2000);
  });
  */

  /* 
  const p1 = new Promise(resolve => setTimeout(() => resolve('a'), 2000));
  const p2 = new Promise(resolve => setTimeout(() => resolve('b'), 4000));
  const p3 = new Promise(resolve => setTimeout(() => resolve('c'), 6000));
  const p4 = new Promise(resolve => setTimeout(() => resolve('d'), 8000));

  p1.then(result => console.log(result + ' done'));
  p2.then(result => console.log(result + ' done'));
  p3.then(result => console.log(result + ' done'));
  p4.then(result => console.log(result + ' done'));

  Promise.all([ p1, p2, p3, p4 ]).then(results => {
    console.log('all done');
    console.log(results);
  });

  */

</script>

<script>

  /*
  const addColor = (color) => {

    return fetch('http://localhost:3060/colors', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(color),
    })
      .then(() => fetch('http://localhost:3060/colors'))
      .then(res => res.json());
  };
  */

  const addColor = async (color) => {

    await fetch('http://localhost:3060/colors', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(color),
    });

    const res = await fetch('http://localhost:3060/colors');

    return res.json();
  };

  addColor({ name: 'purple', hexcode: '#FF00FF' })
    .then(colors => console.log(colors));


</script>